{% extends 'storefront/base.html' %}

{% block title %}Home - UOMO{% endblock %}

{% block content %}
    <!-- Hero Slider -->
    <section class="hero-slider">
        <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
            </div>
            <div class="carousel-inner">
                <!-- Slide 1: Occasional / Party Wear -->
                <div class="carousel-item active">
                    <div class="hero-slide"
                         style="background-image: url('https://images.unsplash.com/photo-1566737236500-c8ac43014a67?q=80&w=2070&auto=format&fit=crop');">
                        <div class="container-fluid">
                            <div class="hero-content">
                                <h6 class="hero-subtitle">THE EVENING EDIT</h6>
                                <h1 class="hero-title">Shine Bright<br>This Season</h1>
                                <p class="hero-text">Elegant dresses and sharp suits for every special occasion.</p>
                                <div class="hero-btns">
                                    <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary">Shop Women</a>
                                    <a href="{% url 'shop' %}" class="btn-hero btn-hero-outline">Shop Men</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Casual / Seasonal -->
                <div class="carousel-item">
                    <div class="hero-slide"
                         style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop');">
                        <div class="container-fluid">
                            <div class="hero-content">
                                <h6 class="hero-subtitle">SUMMER 2024 COLLECTION</h6>
                                <h1 class="hero-title">New Trends <br>Are Here</h1>
                                <p class="hero-text">Discover the latest arrivals with premium fabrics and modern cuts.</p>
                                <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary">Explore Collection</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 3: Accessories / Sale -->
                <div class="carousel-item">
                    <div class="hero-slide"
                         style="background-image: url('https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=1600');">
                        <div class="container-fluid">
                            <div class="hero-content">
                                <h6 class="hero-subtitle">LIMITED TIME OFFER</h6>
                                <h1 class="hero-title">Up to 50% Off<br>Selected Items</h1>
                                <p class="hero-text">Don't miss out on our exclusive mid-season sale event.</p>
                                <a href="{% url 'shop' %}" class="btn-hero btn-hero-white">Shop Sale</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </section>

    <!-- Collections Grid -->
    <!-- Featured Categories Section -->
    <section class="collections-section">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h6 class="section-subtitle">DISCOVER</h6>
                <h2 class="section-title">Featured Categories</h2>
            </div>
            
            <div class="featured-grid">
                <!-- Large Item: Women -->
                <div class="featured-item large-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop" alt="Women's Collection">
                        <div class="featured-content">
                            <h3 class="featured-title">Women's Collection</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>

                <!-- Regular Item: Men -->
                <div class="featured-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?q=80&w=2070&auto=format&fit=crop" alt="Men's Collection">
                        <div class="featured-content">
                            <h3 class="featured-title">Men's Collection</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>

                <!-- Regular Item: Accessories -->
                <div class="featured-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1576053139778-7e32f2ae3cfd?q=80&w=2070&auto=format&fit=crop" alt="Accessories">
                        <div class="featured-content">
                            <h3 class="featured-title">Accessories</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- New Arrivals Section -->
    <section class="new-arrivals-section">
        <div class="container">
            <div class="d-flex justify-content-between align-items-end mb-4">
                <div class="section-header text-start mb-0">
                    <h6 class="section-subtitle text-primary">JUST DROPPED</h6>
                    <h2 class="section-title">New Arrivals</h2>
                </div>
                <a href="{% url 'shop' %}" class="btn-link">View All <i class="fas fa-arrow-right ml-2"></i></a>
            </div>
            
            <div class="row g-4" id="new-arrivals-grid">
                <!-- Loaded via AJAX -->
                <div class="col-12 text-center py-5">
                    <div class="spinner-border text-muted"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Popular Products Section -->
    <section class="popular-products-section">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h6 class="section-subtitle">CUSTOMER FAVORITES</h6>
                <h2 class="section-title">Popular This Week</h2>
                <div class="section-divider"></div>
            </div>

            <div class="row g-4" id="popular-products-grid">
                <!-- Loaded via AJAX -->
                <div class="col-12 text-center py-5">
                    <div class="spinner-border text-muted"></div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <a href="{% url 'shop' %}" class="btn btn-primary btn-lg px-5 rounded-0">Discover More</a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="feature-item text-center">
                        <i class="fas fa-shipping-fast feature-icon"></i>
                        <h5 class="feature-title">Fast And Free Delivery</h5>
                        <p class="feature-text">Free delivery for all orders over ৳140</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="feature-item text-center">
                        <i class="fas fa-headset feature-icon"></i>
                        <h5 class="feature-title">24/7 Customer Support</h5>
                        <p class="feature-text">Friendly 24/7 customer support</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="feature-item text-center">
                        <i class="fas fa-shield-alt feature-icon"></i>
                        <h5 class="feature-title">Money Back Guarantee</h5>
                        <p class="feature-text">We return money within 30 days</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="feature-item text-center">
                        <i class="fas fa-lock feature-icon"></i>
                        <h5 class="feature-title">Secure Payment</h5>
                        <p class="feature-text">Your money is safe with us</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_css %}
    <style>
        /* Hero Slider */
        .hero-slider {
            margin-bottom: 0; /* Remove gap */
        }

        .hero-slide {
            height: 100vh; /* Full viewport height */
            min-height: 700px;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: center;
            /* Gradient overlay built-in */
        }

        /* Modern Gradient Overlay */
        .hero-slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 60%, rgba(0,0,0,0) 100%);
            z-index: 1;
        }

        .hero-slide .container-fluid {
            position: relative;
            z-index: 2;
            padding: 0 8%;
        }

        .hero-content {
            max-width: 800px;
            color: #ffffff;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .carousel-item.active .hero-subtitle {
            animation: fadeInUp 0.8s ease forwards 0.3s;
        }
        
        .carousel-item.active .hero-title {
            animation: fadeInUp 0.8s ease forwards 0.5s;
        }
        
        .carousel-item.active .hero-text {
            animation: fadeInUp 0.8s ease forwards 0.7s;
        }
        
        .carousel-item.active .hero-btns {
            animation: fadeInUp 0.8s ease forwards 0.9s;
        }

        /* Initial states for animation */
        .hero-subtitle, .hero-title, .hero-text, .hero-btns {
            opacity: 0; /* Hidden before animation */
        }

        .hero-subtitle {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 20px;
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            backdrop-filter: blur(5px);
        }

        .hero-title {
            font-size: 90px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: -1px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }

        .hero-text {
            font-size: 20px;
            margin-bottom: 40px;
            font-weight: 400;
            max-width: 500px;
            line-height: 1.6;
            color: rgba(255,255,255,0.9);
        }
        
        .hero-btns {
            display: flex;
            gap: 20px;
        }

        /* Hero specific buttons */
        .btn-hero {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 18px 45px;
            font-size: 15px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-hero-primary {
            background: #ffffff;
            color: var(--primary-color);
        }
        
        .btn-hero-primary:hover {
            background: var(--primary-color);
            color: #ffffff;
        }
        
        .btn-hero-outline {
            border: 2px solid #ffffff;
            color: #ffffff;
        }
        
        .btn-hero-outline:hover {
            background: #ffffff;
            color: var(--primary-color);
        }
        
        .btn-hero-white {
            background: transparent;
            border-bottom: 2px solid #fff;
            padding: 10px 0;
            color: #fff;
        }
        
        .btn-hero-white:hover {
            color: #ddd;
            border-color: #ddd;
        }

        /* Custom Navigation */
        .carousel-control-prev,
        .carousel-control-next {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .hero-slider:hover .carousel-control-prev,
        .hero-slider:hover .carousel-control-next {
            opacity: 1;
        }
        
        .hero-slider:hover .carousel-control-prev:hover,
        .hero-slider:hover .carousel-control-next:hover {
            background: #ffffff;
            color: var(--primary-color);
        }

        .carousel-control-prev { left: 40px; }
        .carousel-control-next { right: 40px; }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            filter: invert(1); /* Ensure white arrows */
        }
        
        .carousel-indicators {
            bottom: 30px;
        }

        .carousel-indicators button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: transparent;
            border: 2px solid #fff;
            opacity: 0.7;
            margin: 0 6px;
        }

        .carousel-indicators button.active {
            opacity: 1;
            background: #fff;
            transform: scale(1.2);
        }
        
        /* Mobile Responsive */
        @media (max-width: 991px) {
            .hero-title { font-size: 60px; }
        }
        
        @media (max-width: 768px) {
            .hero-slide { min-height: 500px; height: 75vh; }
            .hero-title { font-size: 42px; margin-bottom: 15px; }
            .hero-subtitle { font-size: 12px; margin-bottom: 15px; }
            .hero-text { font-size: 16px; margin-bottom: 25px; }
            .hero-btns { flex-direction: column; gap: 15px; align-items: flex-start; }
            .btn-hero { padding: 15px 35px; width: 100%; max-width: 250px; }
            .carousel-control-prev, .carousel-control-next { display: none; }
        }

        /* Featured Categories Section */
        .collections-section {
            padding: 100px 0;
            background: #ffffff;
        }

        .section-subtitle {
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--primary-color);
            text-transform: uppercase;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }

        .featured-grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            grid-template-rows: 300px 300px;
            gap: 30px;
        }

        .featured-item {
            position: relative;
            overflow: hidden;
            border-radius: 4px; /* Slight rounding for modern feel */
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        /* Large item spans 2 rows */
        .large-item {
            grid-row: 1 / 3;
            grid-column: 1 / 2;
        }

        .featured-link {
            display: block;
            width: 100%;
            height: 100%;
            position: relative;
            text-decoration: none;
            color: #fff;
        }

        .featured-link img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.2, 1, 0.3, 1);
        }
        
        .featured-item:hover .featured-link img {
            transform: scale(1.08);
        }

        .featured-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .featured-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 15px;
            transform: translateY(10px);
            transition: transform 0.4s ease;
        }
        
        .featured-btn {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255,255,255,0.0);
            padding-bottom: 3px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
            position: relative;
        }
        
        .featured-btn::after {
            content: ' →';
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        /* Hover Effects */
        .featured-item:hover .featured-title {
            transform: translateY(0);
        }
        
        .featured-item:hover .featured-btn {
            opacity: 1;
            transform: translateY(0);
            border-color: #fff;
        }
        
        .featured-item:hover .featured-btn::after {
            opacity: 1;
        }

        /* Responsive Grid */
        @media (max-width: 991px) {
            .featured-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }
            
            .large-item {
                grid-column: auto;
                grid-row: auto;
                height: 500px;
            }
            
            .featured-item {
                height: 350px;
            }
        }

        /* New Arrivals Section */
        .new-arrivals-section {
            padding: 80px 0;
            background: #ffffff;
        }
        
        .btn-link {
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary-color);
            text-decoration: none;
            position: relative;
            padding-bottom: 2px;
        }
        
        .btn-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--primary-color);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s;
        }
        
        .btn-link:hover::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        /* Popular Products Section */
        .popular-products-section {
            padding: 80px 0 100px;
            background-color: #f9f9f9; /* Distinct background */
        }
        
        .section-divider {
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            margin: 20px auto 0;
        }
        
        /* Shared Section Header Styles */
        .section-subtitle {
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--secondary-color);
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
        }

        .section-title {
            font-size: 36px;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 0;
            color: var(--primary-color);
            line-height: 1.2;
        }

        /* Product Card Design - Unified Frame */
        .product-card {
            background: #ffffff;
            border: none;
            border-radius: 8px; /* Soft rounding */
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
            overflow: hidden; /* Contains the image and info within border-radius */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* Slight shadow base */
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12); /* Elevated shadow on hover */
        }
        
        .product-image {
            position: relative;
            overflow: hidden;
            margin-bottom: 0; /* Removed gap to merge with bottom part */
            background: #f8f8f8;
            border-radius: 0; /* Reset radius */
            flex-shrink: 0;
        }
        
        .product-image img {
            width: 100%;
            height: 350px; /* Slightly reduced height for better proportion */
            object-fit: cover;
            transition: opacity 0.4s ease, transform 0.6s cubic-bezier(0.33, 1, 0.68, 1);
        }
        
        .product-image .main-img {
            z-index: 1;
        }
        
        .product-image .hover-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            z-index: 2;
        }
        
        .product-card:hover .product-image .hover-img {
            opacity: 1;
        }
        
        /* Zoom effect backup */
        .product-card:not(:has(.hover-img)):hover .product-image img {
             transform: scale(1.08); /* Smoother zoom */
        }
        
        /* Action Buttons Overlay */
        .product-actions {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 12px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .product-card:hover .product-actions {
            opacity: 1;
            transform: translateY(0);
        }
        
        .action-btn {
            width: 42px;
            height: 42px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(4px); /* Glass effect on buttons */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            color: #ffffff;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #ffffff;
            color: var(--primary-color);
            padding: 6px 14px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            border-radius: 30px; /* Pill shape */
            z-index: 5;
        }
        
        .product-info {
            padding: 20px; /* Reduced padding for compact look */
            text-align: left;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background: #fff;
        }
        
        .product-category {
            font-size: 11px;
            text-transform: uppercase;
            color: #999;
            margin-bottom: 6px; /* Reduced spacing */
            letter-spacing: 1.5px;
            font-weight: 600;
        }
        
        .product-title {
            font-size: 16px; /* Slightly smaller */
            font-weight: 700;
            margin-bottom: 8px; /* Reduced spacing */
            line-height: 1.3;
        }
        
        .product-title a {
            color: #1a1a1a;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .product-title a:hover {
            color: var(--primary-color);
        }
        
        .product-price {
            font-size: 18px;
            font-weight: 800;
            color: #1a1a1a; /* Dark price */
            margin-top: auto;
            display: flex;
            align-items: center;
        }
        
        .product-price .old-price {
            color: #aaa;
            text-decoration: line-through;
            font-weight: 500;
            font-size: 14px;
            margin-right: 10px;
        }

        /* Features Section */
        .features-section {
            background: var(--bg-light);
            padding: 60px 0;
            margin-bottom: 0;
        }

        .feature-item {
            padding: 20px;
        }

        .feature-icon {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .feature-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 48px;
            }

            .collection-card img {
                height: 350px;
            }

            .product-image img {
                height: 300px;
            }
        }
    </style>
{% endblock %}

{% block extra_js %}
    <script>
        // Load New Arrivals
        async function loadNewArrivals() {
            try {
                const data = await apiFetch('/new-arrival-products/?page_size=4');
                const products = data.results || data;
                const container = document.getElementById('new-arrivals-grid');

                if (Array.isArray(products) && products.length > 0) {
                    container.innerHTML = products.map(product => createProductCard(product)).join('');
                } else {
                    container.innerHTML = '<div class="col-12 text-center text-muted">No new arrivals found</div>';
                }
            } catch (error) {
                console.error('Failed to load new arrivals:', error);
                document.getElementById('new-arrivals-grid').innerHTML = '<div class="col-12 text-center text-danger">Failed to load content</div>';
            }
        }

        // Load Popular Products
        async function loadPopularProducts() {
            try {
                const data = await apiFetch('/popular-products/?page_size=8');
                const products = data.results || data;
                const container = document.getElementById('popular-products-grid');

                if (Array.isArray(products) && products.length > 0) {
                    container.innerHTML = products.map(product => createProductCard(product)).join('');
                } else {
                    container.innerHTML = '<div class="col-12 text-center text-muted">No popular products found</div>';
                }
            } catch (error) {
                console.error('Failed to load popular products:', error);
                document.getElementById('popular-products-grid').innerHTML = '<div class="col-12 text-center text-danger">Failed to load content</div>';
            }
        }

        // Create product card (Shared)
        function createProductCard(product) {
            const imageUrl = product.thumbnail || product.image || 'https://via.placeholder.com/400';
            const hoverUrl = product.thumbnail_hover || null;
            
            // Handle Price: Could be string "100.00", number 100.00, or null
            let priceDisplay = '৳0.00';
            if (product.price !== null && product.price !== undefined) {
                const priceVal = parseFloat(product.price);
                if (!isNaN(priceVal)) {
                    priceDisplay = `৳${priceVal.toFixed(2)}`;
                }
            }
            
            const category = product.category_name || 'Fashion';
            return `
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="product-card">
                    <div class="product-image">
                        <img src="${imageUrl}" alt="${product.name}" class="main-img">
                        ${hoverUrl ? `<img src="${hoverUrl}" alt="${product.name}" class="hover-img">` : ''}
                        ${product.is_new ? '<span class="product-badge">New</span>' : ''}
                        
                        <div class="product-actions">
                            <a href="#" class="action-btn" title="Quick View" onclick="showQuickView('${product.slug}'); return false;">
                                <i class="fas fa-shopping-bag"></i>
                            </a>
                            <a href="#" class="action-btn" title="Wishlist">
                                <i class="fas fa-heart"></i>
                            </a>
                            <a href="/shop/${product.slug}/" class="action-btn" title="Quick View">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">${category}</div>
                        <h3 class="product-title">
                            <a href="/shop/${product.slug}/">${product.name}</a>
                        </h3>
                        <div class="product-price">
                            ${priceDisplay}
                        </div>
                    </div>
                </div>
            </div>
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // loadHeroSlider();
            loadNewArrivals();
            loadPopularProducts();
        });
    </script>
{% endblock %}
