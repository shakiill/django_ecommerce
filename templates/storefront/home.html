{% extends 'storefront/base.html' %}

{% block title %}Home - UOMO{% endblock %}

{% block content %}
    <!-- Hero Slider -->
    <section class="hero-slider">
        <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="6000">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
            </div>
            
            <div class="carousel-inner">
                <!-- Slide 1: Occasional / Party Wear -->
                <div class="carousel-item active">
                    <div class="hero-slide" style="background-image: url('https://twelvebd.com/cdn/shop/files/Now_in_motion_slider_2_566d7917-d7c2-4f2e-a416-7823111c42ed.jpg?v=1767269972&width=2000');">
                        <div class="container-fluid h-100">
                            <div class="row h-100 align-items-center">
                                <div class="col-lg-7">
                                    <div class="hero-content animate-reveal-right">
                                        <h6 class="hero-subtitle mb-4"><span>NEW COLLECTION</span></h6>
                                        <h1 class="hero-title mb-4">The Evening Edit<br>Shine Bright</h1>
                                        <p class="hero-text mb-5">Elegant dresses and sharp suits tailored for every premium occasion. Experience the new standard of luxury.</p>
                                        <div class="hero-btns flex-wrap">
                                            <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary me-3">Shop Women</a>
                                            <a href="{% url 'shop' %}" class="btn-hero btn-hero-outline">Shop Men</a>
                                        </div>
                                    </div>
                                </div>
                                {#                                <div class="col-lg-5 d-none d-lg-flex justify-content-end">#}
                                {#                                    <div class="hero-side-info animate-fade-up">#}
                                {#                                        <div class="side-badge">#}
                                {#                                            <span class="badge-year">2026</span>#}
                                {#                                            <span class="badge-text">LIMITED EDITION</span>#}
                                {#                                        </div>#}
                                {#                                    </div>#}
                                {#                                </div>#}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Seasonal -->
                <div class="carousel-item">
                    <div class="hero-slide" style="background-image: url('https://cdn.rawnation.net/4/media/winter_home_2025_2026_web.jpg');">
                         <div class="container-fluid h-100">
                            <div class="row h-100 align-items-center">
                                <div class="col-lg-8">
                                    <div class="hero-content">
                                        <h6 class="hero-subtitle mb-4"><span>TRENDING NOW</span></h6>
                                        <h1 class="hero-title mb-4">Summer 2024<br>Collection</h1>
                                        <p class="hero-text mb-5">Discover the latest arrivals with premium fabrics and modern cuts. Crafted for those who demand excellence.</p>
                                        <div class="hero-btns">
                                            <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary">Explore Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 3: Sale -->
                <div class="carousel-item">
                    <div class="hero-slide" style="background-image: url('https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=2000');">
                         <div class="container-fluid h-100">
                            <div class="row h-100 align-items-center">
                                <div class="col-lg-8">
                                    <div class="hero-content">
                                        <h6 class="hero-subtitle mb-4"><span>EXCLUSIVE OFFER</span></h6>
                                        <h1 class="hero-title mb-4">Mid Season Sale<br>Up to 50% Off</h1>
                                        <p class="hero-text mb-5">Limited time offer on selected premium items. Secure your favorites before they're gone.</p>
                                        <div class="hero-btns">
                                            <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary">Shop Sale</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                <i class="fas fa-chevron-right"></i>
            </button>

            <!-- Scroll Indicator -->
            <div class="hero-scroll-down">
                <div class="mouse"></div>
                <span class="text">Scroll Down</span>
            </div>
        </div>
    </section>

    <!-- Collections Grid -->
    <!-- Featured Categories Section -->
    <section class="collections-section">
        <div class="container-custom">
            <div class="section-header text-center mb-3">
                <h6 class="section-subtitle">DISCOVER</h6>
                <h2 class="section-title">Featured Categories</h2>
            </div>
            
            <div class="featured-grid">
                <!-- Large Item: Women -->
                <div class="featured-item large-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop" alt="Women's Collection">
                        <div class="featured-content">
                            <h3 class="featured-title">Women's Collection</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>

                <!-- Regular Item: Men -->
                <div class="featured-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?q=80&w=2070&auto=format&fit=crop" alt="Men's Collection">
                        <div class="featured-content">
                            <h3 class="featured-title">Men's Collection</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>

                <!-- Regular Item: Accessories -->
                <div class="featured-item">
                    <a href="{% url 'shop' %}" class="featured-link">
                        <img src="https://images.unsplash.com/photo-1576053139778-7e32f2ae3cfd?q=80&w=2070&auto=format&fit=crop" alt="Accessories">
                        <div class="featured-content">
                            <h3 class="featured-title">Accessories</h3>
                            <span class="featured-btn">Shop Now</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Hot Promo Banner -->
    <section class="promo-banner-section bg-soft">
        <div class="container-custom">
            <div class="promo-banner-content">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <div class="promo-image animate-reveal-right">
                            <img src="https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=1200" alt="Flash Sale" class="img-fluid rounded-4 shadow-lg">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="promo-text-side ps-lg-5">
                            <h6 class="text-primary fw-bold letter-spacing-2 mb-3">LIMITED TIME ONLY</h6>
                            <h2 class="display-3 fw-900 mb-2">FLASH SALE<br><span class="text-outline-dark">UP TO 70% OFF</span></h2>
                            <p class="lead text-muted mb-4">Don't wait! Grab your favorites at unbeatable prices. The countdown has already started.</p>
                            <div class="promo-countdown mb-4">
                                <div class="time-item"><span>02</span><small>DAYS</small></div>
                                <div class="time-item"><span>14</span><small>HOURS</small></div>
                                <div class="time-item"><span>45</span><small>MINS</small></div>
                            </div>
                            <a href="{% url 'shop' %}" class="btn-modern btn-primary px-5 py-3">SHOP THE SALE</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- New Arrivals Section -->
    <section class="new-arrivals-section section-padding">
        <div class="container-custom">
            <div class="d-flex justify-content-between align-items-end mb-3">
                <div class="section-header text-start mb-0">
                    <h6 class="section-subtitle text-primary">JUST DROPPED</h6>
                    <h2 class="section-title">New Arrivals</h2>
                </div>
                <a href="{% url 'shop' %}" class="btn-link text-dark fw-bold text-decoration-none border-bottom pb-1">Explore All <i class="fas fa-chevron-right ms-2 fs-xs"></i></a>
            </div>
            
            <!-- Swiper Slider Container -->
            <div class="new-arrivals-slider-wrapper">
                <div class="swiper new-arrivals-swiper">
                    <div class="swiper-wrapper" id="new-arrivals-slider">
                        <!-- Loaded via AJAX -->
                    </div>
                </div>
                <!-- Navigation Buttons -->
                <div class="swiper-button-next new-arrivals-next"></div>
                <div class="swiper-button-prev new-arrivals-prev"></div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section bg-soft">
        <div class="container-custom">
            <div class="swiper testimonials-swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="testimonial-item">
                            <i class="fas fa-quote-left author-quote"></i>
                            <p class="testimonial-content">"The quality of the evening edit exceeded my expectations. The fit is perfect and the materials feel incredibly premium. Truly a new standard in luxury."</p>
                            <div class="testimonial-author">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100" alt="Author" class="author-img">
                                <span class="author-name">Jonathan Reeves</span>
                                <small class="text-muted">Platinum Member</small>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="testimonial-item">
                            <i class="fas fa-quote-left author-quote"></i>
                            <p class="testimonial-content">"Fast delivery and exceptional customer service. This is my third order from UOMO, and I am consistently impressed by the craftsmanship."</p>
                            <div class="testimonial-author">
                                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100" alt="Author" class="author-img">
                                <span class="author-name">Sarah Jenkins</span>
                                <small class="text-muted">Fashion Director</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination mt-5"></div>
            </div>
        </div>
    </section>

    <!-- Brand Identity Section -->
    <section class="brand-story-section bg-dark text-white">
        <div class="container-custom">
            <div class="row align-items-center py-3">
                <div class="col-lg-5">
                    <div class="story-content pe-lg-5">
                        <h6 class="subtitle-line mb-4">ESTABLISHED 2024</h6>
                        <h2 class="display-4 fw-800 mb-4">The UOMO Art of Luxury</h2>
                        <p class="text-white-50 mb-4">We believe that fashion is a form of self-expression. Our pieces are more than just clothing; they are meticulously crafted narratives designed to empower and inspire. From the finest Italian fabrics to modern avant-garde silhouettes, every thread reflects our commitment to excellence.</p>
                        <ul class="story-features list-unstyled mb-5">
                            <li class="mb-3"><i class="fas fa-gem me-3 text-primary"></i> Premium Italian Sourced Fabrics</li>
                            <li class="mb-3"><i class="fas fa-feather me-3 text-primary"></i> Hand-Finished Details</li>
                            <li><i class="fas fa-leaf me-3 text-primary"></i> Sustainable Luxury Practices</li>
                        </ul>
                        <a href="#" class="link-white fw-bold text-decoration-none border-bottom pb-2">Learn Our Heritage →</a>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="story-visuals position-relative">
                        <div class="main-story-img rounded-4 overflow-hidden mb-4 shadow-lg">
                            <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=1200" alt="Modern Luxury" class="img-fluid">
                        </div>
                        <div class="floating-story-img d-none d-md-block rounded-4 overflow-hidden shadow-2xl animate-float">
                            <img src="https://images.unsplash.com/photo-1594932224528-9560c0423985?w=500" alt="Craftsmanship" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Popular Products Section -->
    <section class="popular-products-section section-padding">
        <div class="container-custom">
            <div class="section-header text-center mb-3">
                <h6 class="section-subtitle">CUSTOMER FAVORITES</h6>
                <h2 class="section-title">Popular This Week</h2>
                <div class="section-divider"></div>
            </div>

            <div class="row g-4" id="popular-products-grid">
                <!-- Loaded via AJAX -->
            </div>
            
            <div class="text-center mt-5">
                <a href="{% url 'shop' %}" class="btn-hero btn-hero-primary px-5">Discover Full Collection</a>
            </div>
        </div>
    </section>

    <!-- Elite Newsletter Section -->
    <section class="newsletter-elite-section">
        <div class="container-custom">
            <div class="newsletter-form-wrapper animate-fade-up">
                <h6 class="text-primary fw-bold letter-spacing-3 mb-3">JOIN THE ELITE</h6>
                <h2 class="display-5 fw-900 mb-4 text-white">Unlock Early Access &<br>Exclusive Collections</h2>
                <p class="text-white-50 mb-5">Be the first to know about new drops and members-only events. Zero spam, just pure luxury lifestyle updates.</p>
                <form class="d-flex flex-column flex-md-row gap-3">
                    <input type="email" class="form-control newsletter-elite-input" placeholder="Your premium email address">
                    <button class="btn-hero btn-hero-primary px-5 py-3">SUBSCRIBE NOW</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Modern Social Gallery -->
    <section class="social-gallery-section py-3">
        <div class="container-custom">
            <div class="section-header text-center mb-3">
                <h6 class="section-subtitle">#UOMOSTYLE</h6>
                <h2 class="section-title">Follow Us On Instagram</h2>
            </div>
            <div class="row g-2">
                <div class="col-md-3 col-6">
                    <div class="gallery-item animate-fade-up">
                        <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600" alt="Social" class="img-fluid">
                        <div class="gallery-overlay"><i class="fab fa-instagram"></i></div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="gallery-item animate-fade-up delay-1">
                        <img src="https://images.unsplash.com/photo-1539109132314-d07090422d31?w=600" alt="Social" class="img-fluid">
                        <div class="gallery-overlay"><i class="fab fa-instagram"></i></div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="gallery-item animate-fade-up delay-2">
                        <img src="https://images.unsplash.com/photo-1529139513075-3a3b16995006?w=600" alt="Social" class="img-fluid">
                        <div class="gallery-overlay"><i class="fab fa-instagram"></i></div>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="gallery-item animate-fade-up delay-3">
                        <img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?w=600" alt="Social" class="img-fluid">
                        <div class="gallery-overlay"><i class="fab fa-instagram"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section section-padding">
        <div class="container-custom">
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="feature-box">
                        <i class="fas fa-shipping-fast"></i>
                        <h5 class="author-name mb-3">Priority Shipping</h5>
                        <p class="text-muted small">Complimentary global delivery on all premium orders over ৳5000.</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="feature-box">
                        <i class="fas fa-gem"></i>
                        <h5 class="author-name mb-3">Lifetime Quality</h5>
                        <p class="text-muted small">Every piece is backed by our signature quality and craftsmanship guarantee.</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="feature-box">
                        <i class="fas fa-undo-alt"></i>
                        <h5 class="author-name mb-3">Elegant Returns</h5>
                        <p class="text-muted small">Enjoy a seamless 30-day return policy for ultimate peace of mind.</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="feature-box">
                        <i class="fas fa-lock"></i>
                        <h5 class="author-name mb-3">Encrypted Checkout</h5>
                        <p class="text-muted small">Your security is paramount. We use bank-level encryption for all data.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_css %}
    <style>
        /* Hero Slider Specifics */
        .hero-slide {
            height: 100vh;
            min-height: 700px;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: center;
        }

        .hero-slide::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 60%, rgba(0,0,0,0) 100%);
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            padding: 0 5%;
            max-width: 1000px;
            color: var(--white);
        }

        .hero-subtitle {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 20px;
            display: inline-flex;
            align-items: center;
            color: var(--white);
        }

        .hero-subtitle span {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 8px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-title {
            font-size: clamp(40px, 6vw, 85px);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: -2px;
        }

        .hero-text {
            font-size: 18px;
            margin-bottom: 40px;
            max-width: 550px;
            color: rgba(255,255,255,0.85);
            line-height: 1.6;
        }

        .hero-btns {
            display: flex;
            gap: 20px;
        }

        .btn-hero {
            padding: 16px 40px;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 2px solid transparent;
            transition: var(--transition-base);
            display: inline-flex;
            text-decoration: none;
            border-radius: 4px;
        }

        .btn-hero-primary {
            background: var(--accent-color);
            color: var(--white);
            border-color: var(--accent-color);
        }

        .btn-hero-primary:hover {
            background: var(--white);
            color: var(--black);
            border-color: var(--white);
        }

        .btn-hero-outline {
            border-color: var(--white);
            color: var(--white);
        }

        .btn-hero-outline:hover {
            background: var(--white);
            color: var(--black);
        }

        .hero-side-info {
            position: relative;
            padding-right: 50px;
        }

        .side-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid var(--white);
            padding: 30px 15px;
            border-radius: 100px;
        }

        .badge-year {
            font-size: 24px;
            font-weight: 900;
            margin-bottom: 5px;
        }

        .badge-text {
            font-size: 10px;
            font-weight: 700;
            writing-mode: vertical-rl;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        /* Custom Navigation */
        .carousel-control-prev,
        .carousel-control-next {
            width: 55px;
            height: 55px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            border: 1px solid rgba(255,255,255,0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 14px;
        }

        .hero-slider:hover .carousel-control-prev,
        .hero-slider:hover .carousel-control-next {
            opacity: 1;
        }

        .carousel-control-prev { left: 50px; }
        .carousel-control-next { right: 50px; }

        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            background: var(--white);
            color: var(--black);
            transform: translateY(-50%) scale(1.1);
        }

        /* Scroll Down */
        .hero-scroll-down {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--white);
        }

        .hero-scroll-down .mouse {
            width: 26px;
            height: 42px;
            border: 2px solid var(--white);
            border-radius: 20px;
            position: relative;
            margin-bottom: 10px;
        }

        .hero-scroll-down .mouse::after {
            content: '';
            width: 4px;
            height: 8px;
            background: var(--white);
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
            animation: scrollDownAni 1.5s infinite;
        }

        @keyframes scrollDownAni {
            0% { opacity: 0; transform: translate(-50%, 0); }
            50% { opacity: 1; transform: translate(-50%, 10px); }
            100% { opacity: 0; transform: translate(-50%, 20px); }
        }

        .hero-scroll-down .text {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
        }

        .carousel-indicators {
            bottom: 45px;
            right: 130px;
            left: auto;
            margin: 0;
            flex-direction: column;
            width: auto;
        }

        .carousel-indicators button {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--white);
            opacity: 0.3;
            margin: 8px 0;
            border: none;
            transition: all 0.3s;
        }

        .carousel-indicators button.active {
            opacity: 1;
            transform: scale(1.5);
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        
        /* Mobile Responsive */
        @media (max-width: 991px) {
            .hero-title { font-size: 60px; }
        }
        
        @media (max-width: 768px) {
            .hero-slide { min-height: 500px; height: 75vh; }
            .hero-title { font-size: 42px; margin-bottom: 15px; }
            .hero-subtitle { font-size: 12px; margin-bottom: 15px; }
            .hero-text { font-size: 16px; margin-bottom: 25px; }
            .hero-btns { flex-direction: column; gap: 15px; align-items: flex-start; }
            .btn-hero { padding: 15px 35px; width: 100%; max-width: 250px; }
            .carousel-control-prev, .carousel-control-next { display: none; }
        }

        /* Featured Categories Section */
        .collections-section {
            padding: 30px 0;
            background: #ffffff;
        }

        .section-subtitle {
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--primary-color);
            text-transform: uppercase;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }

        /* Featured Grid */
        .featured-grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            grid-template-rows: 350px 350px;
            gap: 30px;
        }

        .featured-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: var(--shadow-soft);
        }

        /* Large item spans 2 rows */
        .large-item { grid-row: 1 / 3; }

        .featured-link { display: block; height: 100%; width: 100%; }

        .featured-link img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1.2s cubic-bezier(0.2, 1, 0.3, 1);
        }
        
        .featured-item:hover img { transform: scale(1.1); }

        .featured-content {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            padding: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            z-index: 2;
        }
        
        .featured-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--white);
            margin-bottom: 15px;
        }
        
        .featured-btn {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--white);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 5px;
            position: relative;
        }
        
        .featured-btn::after {
            content: ' →';
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        /* Hover Effects */
        .featured-item:hover .featured-title {
            transform: translateY(0);
        }
        
        .featured-item:hover .featured-btn {
            opacity: 1;
            transform: translateY(0);
            border-color: #fff;
        }
        
        .featured-item:hover .featured-btn::after {
            opacity: 1;
        }

        /* Responsive Grid */
        @media (max-width: 991px) {
            .featured-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }
            
            .large-item {
                grid-column: auto;
                grid-row: auto;
                height: 500px;
            }
            
            .featured-item {
                height: 350px;
            }
        }

        /* New Arrivals Section */
        .new-arrivals-section {
            padding: 80px 0;
            background: #ffffff;
        }
        
        .btn-link {
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary-color);
            text-decoration: none;
            position: relative;
            padding-bottom: 2px;
        }
        
        .btn-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--primary-color);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s;
        }
        
        .btn-link:hover::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        /* New Arrivals Slider Styles */
        .new-arrivals-slider-wrapper {
            position: relative;
            padding: 0 80px; /* Increased padding to clear buttons from content */
        }

        .new-arrivals-swiper {
            overflow: hidden; /* prevents content spillover */
            padding-bottom: 50px; /* Space for pagination */
            padding-top: 20px; /* Space for top shadows */
            margin-top: -20px; /* Compensate for top padding */
        }

        .new-arrivals-swiper .swiper-slide {
            height: auto;
            opacity: 1;
            transition: opacity 0.3s;
        }

        /* Custom Navigation Buttons */
        .new-arrivals-next,
        .new-arrivals-prev {
            width: 50px;
            height: 50px;
            background: #ffffff;
            border: none;
            border-radius: 50%;
            color: var(--primary-color);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: absolute;
            top: 175px; /* Vertically centered on the 350px tall image */
            transform: translateY(-50%);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0;
        }

        .new-arrivals-next:after,
        .new-arrivals-prev:after {
            font-size: 18px;
            font-weight: 700;
        }

        .new-arrivals-next:hover,
        .new-arrivals-prev:hover {
            background: var(--primary-color);
            color: #ffffff;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .new-arrivals-prev {
            left: 15px;
        }

        .new-arrivals-next {
            right: 15px;
        }

        /* Pagination Dots */
        .new-arrivals-pagination {
            bottom: 0 !important;
            text-align: center;
            width: 100%;
        }

        .new-arrivals-pagination .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            background: #dadada;
            opacity: 1;
            transition: all 0.3s ease;
            margin: 0 6px !important;
        }

        .new-arrivals-pagination .swiper-pagination-bullet-active {
            background: var(--primary-color);
            transform: scale(1.3);
        }

        /* Responsive Slider */
        @media (max-width: 768px) {
            .new-arrivals-slider-wrapper {
                padding: 0 0; /* Remove padding on mobile */
            }
            
            .new-arrivals-next,
            .new-arrivals-prev {
                display: none; /* Hide arrows on mobile for cleaner look */
            }
            
            .new-arrivals-swiper {
                padding-bottom: 40px;
            }
        }

        /* Popular Products Section */
        .popular-products-section {
            padding: 80px 0 100px;
            background-color: #f9f9f9; /* Distinct background */
        }
        
        .section-divider {
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            margin: 20px auto 0;
        }
        
        /* Shared Section Header Styles */
        .section-subtitle {
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--secondary-color);
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
        }

        .section-title {
            font-size: 36px;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 0;
            color: var(--primary-color);
            line-height: 1.2;
        }

        /* Product Card Design - Unified Frame */
        .product-card {
            background: #ffffff;
            border: none;
            border-radius: 8px; /* Soft rounding */
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            position: relative;
            overflow: hidden; /* Contains the image and info within border-radius */
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* Slight shadow base */
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.12); /* Elevated shadow on hover */
        }
        
        .product-image {
            position: relative;
            overflow: hidden;
            margin-bottom: 0; /* Removed gap to merge with bottom part */
            background: #f8f8f8;
            border-radius: 0; /* Reset radius */
            flex-shrink: 0;
        }
        
        .product-image img {
            width: 100%;
            height: 350px; /* Slightly reduced height for better proportion */
            object-fit: cover;
            transition: opacity 0.4s ease, transform 0.6s cubic-bezier(0.33, 1, 0.68, 1);
        }
        
        .product-image .main-img {
            z-index: 1;
        }
        
        .product-image .hover-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            z-index: 2;
        }
        
        .product-card:hover .product-image .hover-img {
            opacity: 1;
        }
        
        /* Zoom effect backup */
        .product-card:not(:has(.hover-img)):hover .product-image img {
             transform: scale(1.08); /* Smoother zoom */
        }
        
        /* Action Buttons Overlay */
        .product-actions {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 12px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .product-card:hover .product-actions {
            opacity: 1;
            transform: translateY(0);
        }
        
        .action-btn {
            width: 42px;
            height: 42px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(4px); /* Glass effect on buttons */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            color: #ffffff;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #ffffff;
            color: var(--primary-color);
            padding: 6px 14px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            border-radius: 30px; /* Pill shape */
            z-index: 5;
        }
        
        .product-info {
            padding: 20px; /* Reduced padding for compact look */
            text-align: left;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background: #fff;
        }
        
        .product-category {
            font-size: 11px;
            text-transform: uppercase;
            color: #999;
            margin-bottom: 6px; /* Reduced spacing */
            letter-spacing: 1.5px;
            font-weight: 600;
        }
        
        .product-title {
            font-size: 16px; /* Slightly smaller */
            font-weight: 700;
            margin-bottom: 8px; /* Reduced spacing */
            line-height: 1.3;
        }
        
        .product-title a {
            color: #1a1a1a;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .product-title a:hover {
            color: var(--primary-color);
        }
        
        .product-price {
            font-size: 18px;
            font-weight: 800;
            color: #1a1a1a; /* Dark price */
            margin-top: auto;
            display: flex;
            align-items: center;
        }
        
        .product-price .old-price {
            color: #aaa;
            text-decoration: line-through;
            font-weight: 500;
            font-size: 14px;
            margin-right: 10px;
        }

        /* Feature Items */
        .features-section { padding: 100px 0; }
        .feature-item {
            padding: 40px 20px;
            background: var(--gray-100);
            border-radius: 16px;
            transition: var(--transition-base);
            height: 100%;
        }

        .feature-item:hover {
            background: var(--white);
            box-shadow: var(--shadow-soft);
            transform: translateY(-5px);
        }

        .feature-icon {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .feature-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 48px;
            }

            .collection-card img {
                height: 350px;
            }

            .product-image img {
                height: 300px;
            }
        }

        /* Hot Promo Banner */
        .promo-banner-section {
            padding: 40px 0;
            background: #fdfdfd;
        }

        .promo-banner-content {
            background: #f8f8f8;
            border-radius: 20px;
            overflow: hidden;
            padding: 40px;
            position: relative;
        }

        .text-outline-dark {
            -webkit-text-stroke: 1px var(--black);
            color: transparent;
        }

        .promo-countdown {
            display: flex;
            gap: 20px;
        }

        .time-item {
            background: var(--white);
            padding: 15px 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow-soft);
            min-width: 90px;
        }

        .time-item span {
            display: block;
            font-size: 24px;
            font-weight: 800;
            line-height: 1;
        }

        .time-item small {
            font-size: 10px;
            font-weight: 700;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Brand Story Section */
        .brand-story-section {
            padding: 60px 0;
            overflow: hidden;
        }

        .subtitle-line {
            display: inline-flex;
            align-items: center;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 3px;
            color: var(--primary-color);
        }

        .subtitle-line::after {
            content: '';
            width: 40px;
            height: 1px;
            background: var(--primary-color);
            margin-left: 15px;
        }

        .story-visuals {
            height: 600px;
        }

        .main-story-img img {
            width: 100%;
            height: 500px;
            object-fit: cover;
        }

        .floating-story-img {
            position: absolute;
            bottom: 0;
            left: -50px;
            width: 250px;
            z-index: 2;
            border: 10px solid var(--black);
        }

        .link-white:hover {
            color: var(--primary-color);
            border-color: var(--primary-color) !important;
        }

        /* Social Gallery */
        .gallery-item {
            position: relative;
            height: 350px;
            overflow: hidden;
            cursor: pointer;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition-slow);
        }

        .gallery-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 30px;
            opacity: 0;
            transition: var(--transition-base);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        /* Testimonials Section */
        .testimonials-section {
            padding: 60px 0;
            background: #fafafa;
        }

        .testimonial-item {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .testimonial-content {
            font-size: clamp(18px, 3vw, 28px);
            font-weight: 500;
            line-height: 1.4;
            color: var(--black);
            margin-bottom: 35px;
            font-style: italic;
        }

        .testimonial-author {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .author-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid var(--white);
            box-shadow: var(--shadow-soft);
        }

        .author-name {
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 14px;
        }

        .author-quote {
            color: var(--primary-color);
            font-size: 40px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* Elite Newsletter */
        .newsletter-elite-section {
            padding: 100px 0;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1600') center/cover;
            color: var(--white);
            text-align: center;
        }

        .newsletter-form-wrapper {
            max-width: 600px;
            margin: 0 auto;
        }

        .newsletter-elite-input {
            background: rgba(255,255,255,0.1) !important;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2) !important;
            color: var(--white) !important;
            padding: 18px 25px !important;
            border-radius: 50px !important;
            text-align: center;
            margin-bottom: 20px;
        }

        .newsletter-elite-input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        /* Refined Features */
        .features-section {
            padding: 100px 0;
            background: var(--white);
        }

        .feature-box {
            padding: 40px;
            border: 1px solid var(--gray-200);
            transition: var(--transition-base);
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .feature-box:hover {
            border-color: var(--black);
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .feature-box i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 25px;
        }

        /* Responsive Improvements */
        @media (max-width: 991px) {
            .promo-banner-content { padding: 40px; }
            .story-visuals { height: auto; margin-top: 50px; }
            .floating-story-img { display: none !important; }
        }
    </style>
{% endblock %}

{% block extra_js %}
    <script>
        // Load New Arrivals with Slider
        async function loadNewArrivals() {
            try {
                const data = await apiFetch('/new-arrival-products/?page_size=8');
                const products = data.results || data;
                const container = document.getElementById('new-arrivals-slider');

                if (Array.isArray(products) && products.length > 0) {
                    container.innerHTML = products.map(product => createProductSlide(product)).join('');
                    
                    // Initialize Swiper after products are loaded
                    initNewArrivalsSwiper();
                } else {
                    container.innerHTML = '<div class="swiper-slide"><div class="text-center text-muted py-5">No new arrivals found</div></div>';
                }
            } catch (error) {
                console.error('Failed to load new arrivals:', error);
                document.getElementById('new-arrivals-slider').innerHTML = '<div class="swiper-slide"><div class="text-center text-danger py-5">Failed to load content</div></div>';
            }
        }

        // Initialize New Arrivals Swiper
        function initNewArrivalsSwiper() {
            new Swiper('.new-arrivals-swiper', {
                slidesPerView: 1,
                spaceBetween: 30,
                loop: true, /* Enable Loop */
                grabCursor: true,
                navigation: {
                    nextEl: '.new-arrivals-next',
                    prevEl: '.new-arrivals-prev',
                },
                pagination: {
                    el: '.new-arrivals-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
                breakpoints: {
                    576: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    768: {
                        slidesPerView: 3,
                        spaceBetween: 25,
                    },
                    1200: {
                        slidesPerView: 4,
                        spaceBetween: 30,
                    },
                },
                autoplay: {
                    delay: 4000,
                    disableOnInteraction: false,
                    pauseOnMouseEnter: true,
                },
                speed: 800,
                effect: 'slide',
            });
        }

        // Load Popular Products
        async function loadPopularProducts() {
            try {
                const data = await apiFetch('/popular-products/?page_size=8');
                const products = data.results || data;
                const container = document.getElementById('popular-products-grid');

                if (Array.isArray(products) && products.length > 0) {
                    container.innerHTML = products.map(product => createProductCard(product)).join('');
                } else {
                    container.innerHTML = '<div class="col-12 text-center text-muted">No popular products found</div>';
                }
            } catch (error) {
                console.error('Failed to load popular products:', error);
                document.getElementById('popular-products-grid').innerHTML = '<div class="col-12 text-center text-danger">Failed to load content</div>';
            }
        }

        // Create product card for grid (Shared)
        function createProductCard(product) {
            const imageUrl = product.thumbnail || product.image || 'https://via.placeholder.com/400';
            const hoverUrl = product.thumbnail_hover || null;
            
            // Handle Price: Could be string "100.00", number 100.00, or null
            let priceDisplay = '৳0.00';
            if (product.price !== null && product.price !== undefined) {
                const priceVal = parseFloat(product.price);
                if (!isNaN(priceVal)) {
                    priceDisplay = `৳${priceVal.toFixed(2)}`;
                }
            }
            
            const category = product.category_name || 'Fashion';
            return `
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="product-card">
                    <div class="product-image">
                        <img src="${imageUrl}" alt="${product.name}" class="main-img">
                        ${hoverUrl ? `<img src="${hoverUrl}" alt="${product.name}" class="hover-img">` : ''}
                        ${product.is_new ? '<span class="product-badge">New</span>' : ''}
                        
                        <div class="product-actions">
                            <a href="#" class="action-btn" title="Quick View" onclick="showQuickView('${product.slug}'); return false;">
                                <i class="fas fa-shopping-bag"></i>
                            </a>
                            <a href="#" class="action-btn" title="Wishlist">
                                <i class="fas fa-heart"></i>
                            </a>
                            <a href="/shop/${product.slug}/" class="action-btn" title="Quick View">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">${category}</div>
                        <h3 class="product-title">
                            <a href="/shop/${product.slug}/">${product.name}</a>
                        </h3>
                        <div class="product-price">
                            ${priceDisplay}
                        </div>
                    </div>
                </div>
            </div>
            `;
        }

        // Create product slide for slider
        function createProductSlide(product) {
            const imageUrl = product.thumbnail || product.image || 'https://via.placeholder.com/400';
            const hoverUrl = product.thumbnail_hover || null;
            
            // Handle Price: Could be string "100.00", number 100.00, or null
            let priceDisplay = '৳0.00';
            if (product.price !== null && product.price !== undefined) {
                const priceVal = parseFloat(product.price);
                if (!isNaN(priceVal)) {
                    priceDisplay = `৳${priceVal.toFixed(2)}`;
                }
            }
            
            const category = product.category_name || 'Fashion';
            return `
            <div class="swiper-slide">
                <div class="product-card">
                    <div class="product-image">
                        <img src="${imageUrl}" alt="${product.name}" class="main-img">
                        ${hoverUrl ? `<img src="${hoverUrl}" alt="${product.name}" class="hover-img">` : ''}
                        ${product.is_new ? '<span class="product-badge">New</span>' : ''}
                        
                        <div class="product-actions">
                            <a href="#" class="action-btn" title="Quick View" onclick="showQuickView('${product.slug}'); return false;">
                                <i class="fas fa-shopping-bag"></i>
                            </a>
                            <a href="#" class="action-btn" title="Wishlist">
                                <i class="fas fa-heart"></i>
                            </a>
                            <a href="/shop/${product.slug}/" class="action-btn" title="Quick View">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">${category}</div>
                        <h3 class="product-title">
                            <a href="/shop/${product.slug}/">${product.name}</a>
                        </h3>
                        <div class="product-price">
                            ${priceDisplay}
                        </div>
                    </div>
                </div>
            </div>
            `;
        }

        // Initialize Testimonials Swiper
        function initTestimonialsSwiper() {
            new Swiper('.testimonials-swiper', {
                slidesPerView: 1,
                spaceBetween: 30,
                loop: true,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                speed: 1000,
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // loadHeroSlider();
            loadNewArrivals();
            loadPopularProducts();
            initTestimonialsSwiper();
        });
    </script>
{% endblock %}
